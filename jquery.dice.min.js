(function(b){b.fn.dice=function(a){var e=this,a=b.extend({background:"#ffffff",callback:null,glyphSize:40,glyphSrc:"dice.gif",juggleTimeout:300,number:1,selectGlyph:function(c){var d;switch(c){default:case 1:d=c=0;break;case 2:c=2*a.glyphSize;d=0;break;case 3:c=a.glyphSize;d=0;break;case 4:d=c=a.glyphSize;break;case 5:c=2*a.glyphSize;d=a.glyphSize;break;case 6:c=0,d=a.glyphSize}b(e).css("backgroundPosition",c+"px "+d+"px")}},a);b(this).css({background:a.background+" url("+a.glyphSrc+")",height:a.glyphSize,
width:a.glyphSize});b(this).click(function(){b.when(b.Deferred(function(c){var d=b(e).css("z-index");b(e).css("z-index",1).stop().animate({"z-index":a.juggleTimeout},{step:function(){a.selectGlyph(Math.floor(Math.random()*6)+1)},duration:a.juggleTimeout,complete:c.resolve}).css("z-index",d);return c.promise()})).done(function(){a.number=Math.floor(Math.random()*6)+1;b(this).stop();a.selectGlyph(a.number);a.callback&&typeof a.callback==="function"&&a.callback(a.number)})});b(this).click()}})(jQuery);
